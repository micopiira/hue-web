{"version":3,"sources":["propTypes.js","redux/actions.js","fn.js","components/ColorPicker/cie_rgb_converter.js","components/ColorPicker/ColorPicker.js","components/ColorPicker/CtColorPicker.js","components/ListItem.js","components/LightSelector.js","components/List.js","components/LoadingIndicator.js","components/Setup.js","components/App/App.js","components/ErrorBoundary.js","redux/reducers.js","serviceWorker.js","index.js"],"names":["effects","octet","props","propName","componentName","value","Error","concat","light","manufacturername","PropTypes","string","modelid","name","id","productid","state","shape","alert","oneOf","bri","number","colormode","ct","effect","hue","on","bool","reachable","sat","swconfigid","swversion","type","uniqueid","action","object","class","lights","arrayOf","recycle","r","g","b","ipaddress","types","createActionCreator","payload","login","bridge","username","fetchBridgesThunk","dispatch","Hue","nupnpSearch","then","bridges","fetchBridgesSuccess","setLightStateThunk","getState","setLightState","api","fetchLightsThunk","fetchGroupsThunk","groups","fetchGroupsSuccess","filter","group","_ref","arr","keyField","fetchLightsSuccess","Object","assign","apply","toConsumableArray","map","item","defineProperty","loginOrRegisterThunk","Promise","resolve","reject","usernames","window","confirm","createUser","bridgeId","register","catch","gammaCorrect","input","Math","pow","reverseGammaCorrection","XYZtoxy","X","Y","Z","it","toFixed","toNumber","isNaN","cie_to_rgb","x","y","z","arguments","length","undefined","red","green","blue","color","round","ColorPicker","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","visible","handleClick","bind","assertThisInitialized","drawColorWheel","nextProps","prevState","event","_this2","data","ctx","getImageData","nativeEvent","offsetX","offsetY","setState","onChange","rgb","xy","parseFloat","canvas","refs","getContext","rx","ry","d","f","u","v","w","cx","width","cy","height","radius","imageData","createImageData","pixels","i","atan2","PI","sqrt","floor","putImageData","_this3","react_default","a","createElement","style","position","onMouseOver","onMouseOut","className","backgroundColor","visibility","cursor","zIndex","top","left","maxWidth","ref","onClick","React","Component","CtColorPicker","rgb2colorTemperature","h","kelvin","_ct$colorTemperature","colorTemperature2rgb","border","connect","ownProps","bindActionCreators","disabled","aria-pressed","aria-hidden","title","htmlFor","target","key","components_ColorPicker_ColorPicker","_ref2","ColorPicker_CtColorPicker","_ref3","padding","parseInt","min","max","lightId","currentLight","cssClass","join","checked","List","currentBridge","components_LightSelector","components_ListItem","find","LoadingIndicator","Setup","loading","bridgesList","noBridges","App","href","LoadingIndicator_LoadingIndicator","components_List","components_Setup","ErrorBoundary","hasError","error","info","role","data-dismiss","aria-label","children","HueApi","_action$payload","includes","objectSpread","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","store","createStore","combineReducers","reducers","localStorage","getItem","JSON","parse","compose","applyMiddleware","thunk","subscribe","persistedState","setItem","stringify","ReactDOM","render","es","components_ErrorBoundary","components_App_App","document","getElementById","URL","process","origin","addEventListener","fetch","response","contentType","headers","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.dcf6f68c.chunk.js","sourcesContent":["import PropTypes from 'prop-types';\r\n\r\nexport const effects = ['none', 'colorloop'];\r\n\r\nconst octet = (props, propName, componentName) => {\r\n\tconst value = props[propName];\r\n\tif (!(value >= 0 && value <= 255)) {\r\n\t\treturn new Error(`Invalid prop '${propName}' supplied to '${componentName}'. Octet value should be 0 - 255, '${value}' given.`);\r\n\t}\r\n};\r\n\r\nconst light = {\r\n\tmanufacturername: PropTypes.string,\r\n\tmodelid: PropTypes.string,\r\n\tname: PropTypes.string,\r\n\tid: PropTypes.string,\r\n\tproductid: PropTypes.string,\r\n\tstate: PropTypes.shape({\r\n\t\talert: PropTypes.oneOf(['none', 'select', 'lselect']),\r\n\t\tbri: PropTypes.number,\r\n\t\tcolormode: PropTypes.oneOf(['hs', 'xy', 'ct']),\r\n\t\tct: PropTypes.number,\r\n\t\teffect: PropTypes.oneOf(effects),\r\n\t\thue: PropTypes.number,\r\n\t\ton: PropTypes.bool,\r\n\t\treachable: PropTypes.bool,\r\n\t\tsat: PropTypes.number,\r\n\t}),\r\n\tswconfigid: PropTypes.string,\r\n\tswversion: PropTypes.string,\r\n\ttype: PropTypes.string,\r\n\tuniqueid: PropTypes.string,\r\n};\r\n\r\nexport default {\r\n\toctet,\r\n\tgroup: PropTypes.shape({\r\n\t\taction: PropTypes.object,\r\n\t\tclass: PropTypes.string,\r\n\t\tid: PropTypes.string,\r\n\t\tlights: PropTypes.arrayOf(light.id),\r\n\t\tname: PropTypes.string,\r\n\t\trecycle: PropTypes.bool,\r\n\t\tstate: PropTypes.object,\r\n\t\ttype: PropTypes.string\r\n\t}),\r\n\trgb: PropTypes.shape({\r\n\t\tr: octet,\r\n\t\tg: octet,\r\n\t\tb: octet\r\n\t}),\r\n\tbridge: PropTypes.shape({\r\n\t\tid: PropTypes.string,\r\n\t\tipaddress: PropTypes.string,\r\n\t}),\r\n\tlight\r\n}","import Hue from 'node-hue-api';\r\nimport {arrayToObject} from '../fn';\r\n\r\nexport const types = {\r\n\tSET_LIGHT_STATE: 'SET_LIGHT_STATE',\r\n\tFETCH_LIGHTS: 'FETCH_LIGHTS',\r\n\tFETCH_LIGHTS_SUCCESS: 'FETCH_LIGHTS_SUCCESS',\r\n\tFETCH_BRIDGES: 'FETCH_BRIDGES',\r\n\tFETCH_BRIDGES_SUCCESS: 'FETCH_BRIDGES_SUCCESS',\r\n\tFETCH_GROUPS_SUCCESS: 'FETCH_GROUPS_SUCCESS',\r\n\tLOGIN: 'LOGIN',\r\n\tREGISTER: 'REGISTER',\r\n\tLOGOUT: 'LOGOUT'\r\n};\r\n\r\nconst createActionCreator = (type, payload) => ({type, payload});\r\n\r\nexport const setLightState = (id, state) => createActionCreator(types.SET_LIGHT_STATE, {id, state});\r\nexport const fetchLightsSuccess = lights => createActionCreator(types.FETCH_LIGHTS_SUCCESS, lights);\r\nexport const fetchGroupsSuccess = groups => createActionCreator(types.FETCH_GROUPS_SUCCESS, groups);\r\nexport const fetchBridgesSuccess = bridges => createActionCreator(types.FETCH_BRIDGES_SUCCESS, bridges);\r\nexport const register = (bridgeId, username) => createActionCreator(types.REGISTER, {bridgeId, username});\r\nexport const logout = () => createActionCreator(types.LOGOUT);\r\nexport const login = (bridge, username) => createActionCreator(types.LOGIN, {bridge, username});\r\n\r\nexport const fetchBridgesThunk = () => dispatch => {\r\n\tdispatch({type: types.FETCH_BRIDGES});\r\n\treturn Hue.nupnpSearch().then(bridges => {\r\n\t\tdispatch(fetchBridgesSuccess(bridges));\r\n\t});\r\n};\r\n\r\nexport const setLightStateThunk = (id, state) => (dispatch, getState) => {\r\n\tdispatch(setLightState(id, state));\r\n\treturn getState().api.setLightState(id, state).then(() => dispatch(fetchLightsThunk()));\r\n};\r\n\r\nexport const fetchGroupsThunk = () => (dispatch, getState) =>\r\n\tgetState().api.groups()\r\n\t\t.then(groups => {\r\n\t\t\tdispatch(fetchGroupsSuccess(groups.filter(group => group.type === \"Room\")));\r\n\t\t});\r\n\r\nexport const fetchLightsThunk = () => (dispatch, getState) => {\r\n\tdispatch({type: types.FETCH_LIGHTS});\r\n\treturn getState().api.lights()\r\n\t\t.then(({lights}) => {\r\n\t\t\tdispatch(fetchLightsSuccess(arrayToObject(lights, 'id')));\r\n\t\t});\r\n};\r\n\r\nexport const loginOrRegisterThunk = bridge => (dispatch, getState) => new Promise((resolve, reject) => {\r\n\tconst username = getState().usernames[bridge.id];\r\n\tif (username) {\r\n\t\tresolve(username);\r\n\t} else {\r\n\t\tif (window.confirm(`Press link button on bridge ${bridge.ipaddress} and then click OK`)) {\r\n\t\t\tgetState().api.createUser(bridge.ipaddress).then(username => {\r\n\t\t\t\tdispatch(register(bridge.id, username));\r\n\t\t\t\tresolve(username);\r\n\t\t\t}).catch(reject);\r\n\t\t} else {\r\n\t\t\treject(new Error(\"User cancelled linking\"));\r\n\t\t}\r\n\t}\r\n}).then(username => {\r\n\tdispatch(login(bridge, username))\r\n});\r\n\r\n","export const identity = x => x;\nexport const arrayToObject = (arr, keyField) => Object.assign({}, ...arr.map(item => ({[item[keyField]]: item})));\n","/*\r\n With these functions you can convert the CIE color space to the RGB color space and vice versa.\r\n\r\n The developer documentation for Philips Hue provides the formulas used in the code below:\r\n https://developers.meethue.com/documentation/color-conversions-rgb-xy\r\n\r\n I've used the formulas and Objective-C example code and transfered it to JavaScript.\r\n\r\n\r\n Examples:\r\n\r\n var rgb = cie_to_rgb(0.6611, 0.2936)\r\n var cie = rgb_to_cie(255, 39, 60)\r\n\r\n ------------------------------------------------------------------------------------\r\n\r\n The MIT License (MIT)\r\n\r\n Copyright (c) 2017 www.usolved.net\r\n Published under https://github.com/usolved/cie-rgb-converter\r\n\r\n Permission is hereby granted, free of charge, to any person obtaining a copy\r\n of this software and associated documentation files (the \"Software\"), to deal\r\n in the Software without restriction, including without limitation the rights\r\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n copies of the Software, and to permit persons to whom the Software is\r\n furnished to do so, subject to the following conditions:\r\n\r\n The above copyright notice and this permission notice shall be included in\r\n all copies or substantial portions of the Software.\r\n\r\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n THE SOFTWARE.\r\n */\r\n\r\nconst gammaCorrect = input => (input > 0.04045) ? Math.pow((input + 0.055) / (1.0 + 0.055), 2.4) : (input / 12.92);\r\nconst reverseGammaCorrection = input => input <= 0.0031308 ? 12.92 * input : (1.0 + 0.055) * Math.pow(input, (1.0 / 2.4)) - 0.055;\r\nconst XYZtoxy = (X, Y, Z) => ([X, Y].map(it => (it / (X + Y + Z)).toFixed(4)));\r\nconst toNumber = input => isNaN(input) ? 0 : input;\r\n\r\n/**\r\n * Converts CIE color space to RGB color space\r\n *\r\n * @param {Number} x\r\n * @param {Number} y\r\n * @param {Number} [brightness] - Ranges from 1 to 254\r\n * @return {Array.<Number>} Array that contains the color values for red, green and blue\r\n */\r\nexport function cie_to_rgb(x, y, brightness = 254) {\r\n\r\n\tconst z = 1.0 - x - y;\r\n\tconst Y = (brightness / 254).toFixed(2);\r\n\tconst X = (Y / y) * x;\r\n\tconst Z = (Y / y) * z;\r\n\r\n\t//Convert to RGB using Wide RGB D65 conversion\r\n\tlet red = X * 1.656492 - Y * 0.354851 - Z * 0.255038;\r\n\tlet green = -X * 0.707196 + Y * 1.655397 + Z * 0.036152;\r\n\tlet blue = X * 0.051713 - Y * 0.121364 + Z * 1.011530;\r\n\r\n\t//If red, green or blue is larger than 1.0 set it back to the maximum of 1.0\r\n\tif (red > blue && red > green && red > 1.0) {\r\n\t\tgreen = green / red;\r\n\t\tblue = blue / red;\r\n\t\tred = 1.0;\r\n\t} else if (green > blue && green > red && green > 1.0) {\r\n\t\tred = red / green;\r\n\t\tblue = blue / green;\r\n\t\tgreen = 1.0;\r\n\t} else if (blue > red && blue > green && blue > 1.0) {\r\n\t\tred = red / blue;\r\n\t\tgreen = green / blue;\r\n\t\tblue = 1.0;\r\n\t}\r\n\r\n\treturn [red, green, blue]\r\n\t\t.map(reverseGammaCorrection)\r\n\t\t.map(color => Math.round(color * 255)) //Convert normalized decimal to decimal\r\n\t\t.map(toNumber);\r\n}\r\n\r\n/**\r\n * Converts RGB color space to CIE color space\r\n *\r\n * @param {Number} red\r\n * @param {Number} green\r\n * @param {Number} blue\r\n * @return {Array.<Number>} Array that contains the CIE color values for x and y\r\n */\r\nexport function rgb_to_cie(red, green, blue) {\r\n\r\n\t//Apply a gamma correction to the RGB values, which makes the color more vivid and more the like the color displayed on the screen of your device\r\n\tred = gammaCorrect(red);\r\n\tgreen = gammaCorrect(green);\r\n\tblue = gammaCorrect(blue);\r\n\r\n\t//RGB values to XYZ using the Wide RGB D65 conversion formula\r\n\tconst X = red * 0.664511 + green * 0.154324 + blue * 0.162028;\r\n\tconst Y = red * 0.283881 + green * 0.668433 + blue * 0.047685;\r\n\tconst Z = red * 0.000088 + green * 0.072310 + blue * 0.986039;\r\n\r\n\treturn XYZtoxy(X, Y, Z).map(toNumber);\r\n}\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport {rgb_to_cie} from \"./cie_rgb_converter\";\r\nimport propTypes from \"../../propTypes\";\r\n\r\nclass ColorPicker extends React.Component {\r\n\r\n\tstatic propTypes = {\r\n\t\tonChange: PropTypes.func.isRequired,\r\n\t\tcolor: propTypes.rgb\r\n\t};\r\n\r\n\tstate = {\r\n\t\tr: 0,\r\n\t\tg: 0,\r\n\t\tb: 0,\r\n\t\tvisible: false\r\n\t};\r\n\r\n\tstatic getDerivedStateFromProps(nextProps, prevState) {\r\n\t\treturn nextProps.color;\r\n\t}\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.handleClick = this.handleClick.bind(this);\r\n\t\tthis.drawColorWheel = this.drawColorWheel.bind(this);\r\n\t}\r\n\r\n\thandleClick(event) {\r\n\t\tconst data = this.ctx.getImageData(event.nativeEvent.offsetX, event.nativeEvent.offsetY, 1, 1).data;\r\n\t\tthis.setState({r: data[0], g: data[1], b: data[2]}, () => {\r\n\t\t\tthis.props.onChange({\r\n\t\t\t\trgb: this.state,\r\n\t\t\t\txy: rgb_to_cie(this.state.r, this.state.g, this.state.b).map(parseFloat)\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tdrawColorWheel() {\r\n\t\tconst canvas = this.refs.canvas;\r\n\t\tthis.ctx = canvas.getContext('2d');\r\n\r\n\t\tconst cx = canvas.width / 2;\r\n\t\tconst cy = canvas.height / 2;\r\n\t\tconst radius = canvas.height / 2.3;\r\n\t\tconst imageData = this.ctx.createImageData(canvas.width, canvas.height);\r\n\t\tconst pixels = imageData.data;\r\n\r\n\t\tlet hue, sat, i = 0, x, y, rx, ry, d, f, g, u, v, w; // Reuse variables for performance?\r\n\r\n\t\tfor (y = 0; y < canvas.height; y = y + 1) {\r\n\t\t\tfor (x = 0; x < canvas.width; x = x + 1, i = i + 4) {\r\n\t\t\t\trx = x - cx;\r\n\t\t\t\try = y - cy;\r\n\t\t\t\td = rx * rx + ry * ry;\r\n\t\t\t\tif (d < radius * radius) {\r\n\t\t\t\t\thue = 6 * (Math.atan2(ry, rx) + Math.PI) / (2 * Math.PI);\r\n\t\t\t\t\tsat = Math.sqrt(d) / radius;\r\n\t\t\t\t\tg = Math.floor(hue);\r\n\t\t\t\t\tf = hue - g;\r\n\t\t\t\t\tu = 255 * (1 - sat);\r\n\t\t\t\t\tv = 255 * (1 - sat * f);\r\n\t\t\t\t\tw = 255 * (1 - sat * (1 - f));\r\n\t\t\t\t\tpixels[i] = [255, v, u, u, w, 255, 255][g];\r\n\t\t\t\t\tpixels[i + 1] = [w, 255, 255, v, u, u, w][g];\r\n\t\t\t\t\tpixels[i + 2] = [u, u, w, 255, 255, v, u][g];\r\n\t\t\t\t\tpixels[i + 3] = 255;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.ctx.putImageData(imageData, 0, 0);\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.setState(this.props.color);\r\n\t\tthis.drawColorWheel();\r\n\t}\r\n\r\n\trender() {\r\n\r\n\t\treturn <div style={{position: 'relative'}}>\r\n\t\t\t<div\r\n\t\t\t\tonMouseOver={() => this.setState({visible: true})}\r\n\t\t\t\tonMouseOut={() => this.setState({visible: false})}\r\n\t\t\t\tclassName=\"custom-select\"\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\theight: 50,\r\n\t\t\t\t\twidth: '100%'\r\n\t\t\t\t}}>\r\n\t\t\t\t<div style={{\r\n\t\t\t\t\tbackgroundColor: `rgb(${this.state.r},${this.state.g},${this.state.b})`,\r\n\t\t\t\t\theight: '100%'\r\n\t\t\t\t}}/>\r\n\t\t\t</div>\r\n\t\t\t<div\r\n\t\t\t\tonMouseOver={() => this.setState({visible: true})}\r\n\t\t\t\tonMouseOut={() => this.setState({visible: false})}\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tvisibility: this.state.visible ? 'visible' : 'hidden',\r\n\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\tcursor: 'pointer',\r\n\t\t\t\t\tzIndex: 999,\r\n\t\t\t\t\ttop: 50,\r\n\t\t\t\t\tleft: 0\r\n\t\t\t\t}}>\r\n\t\t\t\t<div className=\"popover bs-popover-bottom\" style={{width: 320, position: 'relative', maxWidth: 320}}>\r\n\t\t\t\t\t<div className=\"arrow\" style={{top: 0, left: '15px'}}/>\r\n\t\t\t\t\t<div className=\"popover-body\">\r\n\t\t\t\t\t\t<canvas\r\n\t\t\t\t\t\t\theight={300}\r\n\t\t\t\t\t\t\twidth={300}\r\n\t\t\t\t\t\t\tref=\"canvas\"\r\n\t\t\t\t\t\t\tonClick={this.handleClick}/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>;\r\n\t}\r\n}\r\n\r\nexport default ColorPicker;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport ct from 'color-temperature';\r\n\r\nclass CtColorPicker extends React.Component {\r\n\tstatic propTypes = {\r\n\t\tonChange: PropTypes.func\r\n\t};\r\n\tstate = {\r\n\t\tr: 0,\r\n\t\tg: 0,\r\n\t\tb: 0\r\n\t};\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.handleClick = this.handleClick.bind(this);\r\n\t\tthis.drawColorWheel = this.drawColorWheel.bind(this);\r\n\t}\r\n\r\n\thandleClick(event) {\r\n\t\tconst {data} = this.ctx.getImageData(event.nativeEvent.offsetX, event.nativeEvent.offsetY, 1, 1);\r\n\t\tthis.setState({r: data[0], g: data[1], b: data[2]}, () => {\r\n\t\t\tthis.props.onChange({\r\n\t\t\t\trgb: this.state,\r\n\t\t\t\tct: Math.round(1000000 / ct.rgb2colorTemperature({\r\n\t\t\t\t\tred: this.state.r,\r\n\t\t\t\t\tgreen: this.state.g,\r\n\t\t\t\t\tblue: this.state.b\r\n\t\t\t\t}))\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tdrawColorWheel() {\r\n\t\tconst canvas = this.refs.canvas;\r\n\t\tthis.ctx = canvas.getContext('2d');\r\n\r\n\t\tconst kelvinStart = 2000;\r\n\t\tconst kelvinEnd = 6500;\r\n\r\n\t\tconst {width, height} = canvas;\r\n\t\tconst imageData = this.ctx.createImageData(canvas.width, canvas.height);\r\n\t\tconst pixels = imageData.data;\r\n\r\n\t\tfor (let w = 0; w < width; w += 1) {\r\n\t\t\tfor (let h = 0; h < height; h += 1) {\r\n\t\t\t\tconst i = ((h * width) + w) * 4;\r\n\t\t\t\tconst kelvin = ((kelvinEnd - kelvinStart) / width) * w + kelvinStart;\r\n\t\t\t\tconst {red, green, blue} = ct.colorTemperature2rgb(kelvin);\r\n\t\t\t\tpixels[i] = red;\r\n\t\t\t\tpixels[i + 1] = green;\r\n\t\t\t\tpixels[i + 2] = blue;\r\n\t\t\t\tpixels[i + 3] = 255;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.ctx.putImageData(imageData, 0, 0);\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.drawColorWheel();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn <canvas style={{cursor: 'pointer', border: '1px solid #ced4da'}} className=\"img-fluid\" height={50} ref=\"canvas\"\r\n\t\t               onClick={this.handleClick}/>;\r\n\t}\r\n}\r\n\r\nexport default CtColorPicker;","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport propTypes, {effects} from \"../propTypes\";\r\nimport ColorPicker from \"./ColorPicker/ColorPicker\";\r\nimport CtColorPicker from \"./ColorPicker/CtColorPicker\";\r\nimport {connect} from \"react-redux\";\r\nimport {bindActionCreators} from \"redux\";\r\nimport {setLightStateThunk} from \"../redux/actions\";\r\nimport {cie_to_rgb} from \"./ColorPicker/cie_rgb_converter\";\r\n\r\nexport const ListItem = ({light, setLightState}) =>\r\n\t<div className=\"card\">\r\n\t\t<div className=\"card-body\">\r\n\r\n\t\t\t<div className=\"row\">\r\n\t\t\t\t<div className=\"col-sm-2\">\r\n\t\t\t\t\t<button type=\"button\"\r\n\t\t\t\t\t        disabled={!light.state.reachable}\r\n\t\t\t\t\t        className={'btn btn-primary' + (light.state.on ? ' active' : '')}\r\n\t\t\t\t\t        aria-pressed={light.state.on}\r\n\t\t\t\t\t        onClick={() => setLightState({on: !light.state.on})}>\r\n\t\t\t\t\t\t<i className=\"fa fa-power-off\" aria-hidden=\"true\"/>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"col-sm-10\">\r\n\t\t\t\t\t<h5>\r\n\t\t\t\t\t\t{!light.state.reachable &&\r\n\t\t\t\t\t\t<i className=\"fa fa-exclamation-triangle text-warning\" aria-hidden=\"true\" title=\"Unreachable\"/>}\r\n\t\t\t\t\t\t&nbsp;{light.name}</h5>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t{light.state.on &&\r\n\t\t\t<div className=\"row\">\r\n\t\t\t\t<div className=\"col\">\r\n\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t<label htmlFor=\"effect\">Effect</label>\r\n\t\t\t\t\t\t<select id=\"effect\"\r\n\t\t\t\t\t\t        className=\"form-control\"\r\n\t\t\t\t\t\t        onChange={(event) => setLightState({effect: event.target.value})}\r\n\t\t\t\t\t\t        value={light.state.effect}>\r\n\t\t\t\t\t\t\t{effects.map(effect =>\r\n\t\t\t\t\t\t\t\t<option key={effect} value={effect}>{effect}</option>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t<label htmlFor=\"color\">Color</label>\r\n\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t<div className=\"col-sm\">\r\n\t\t\t\t\t\t\t\t<ColorPicker\r\n\t\t\t\t\t\t\t\t\tonChange={({xy}) => setLightState({xy})}\r\n\t\t\t\t\t\t\t\t\tcolor={{\r\n\t\t\t\t\t\t\t\t\t\tr: cie_to_rgb(light.state.xy[0], light.state.xy[1], light.state.bri)[0],\r\n\t\t\t\t\t\t\t\t\t\tg: cie_to_rgb(light.state.xy[0], light.state.xy[1], light.state.bri)[1],\r\n\t\t\t\t\t\t\t\t\t\tb: cie_to_rgb(light.state.xy[0], light.state.xy[1], light.state.bri)[2]\r\n\t\t\t\t\t\t\t\t\t}}/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"col-sm\">\r\n\t\t\t\t\t\t\t\t<CtColorPicker onChange={({ct}) => setLightState({ct})}/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t<label htmlFor=\"brightness\" className=\"col-form-label\">Brightness</label>\r\n\t\t\t\t\t\t<input type=\"range\"\r\n\t\t\t\t\t\t       style={{padding: 0}}\r\n\t\t\t\t\t\t       className=\"form-control\"\r\n\t\t\t\t\t\t       id=\"brightness\"\r\n\t\t\t\t\t\t       value={light.state.bri}\r\n\t\t\t\t\t\t       onChange={(event) => setLightState({bri: parseInt(event.target.value, 10)})}\r\n\t\t\t\t\t\t       min={0}\r\n\t\t\t\t\t\t       max={254}/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t}\r\n\r\n\t\t</div>\r\n\t</div>;\r\n\r\nListItem.propTypes = {\r\n\tlight: PropTypes.shape(propTypes.light),\r\n\tsetLightState: PropTypes.func,\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => bindActionCreators({\r\n\tsetLightState: state => setLightStateThunk(ownProps.light.id, state)\r\n}, dispatch);\r\n\r\nexport default connect(null, mapDispatchToProps)(ListItem);","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport propTypes from \"../propTypes\";\nimport {connect} from \"react-redux\";\nimport {bindActionCreators} from \"redux\";\nimport {setLightStateThunk} from \"../redux/actions\";\n\nconst LightSelector = ({groups, lights, currentLight, onChange, setLightState}) => <ul className=\"list-group list-group-flush\">\n\t{groups.map(group =>\n\t\t<li key={group.id} className=\"list-group-item\">\n\t\t\t<h5>{group.name}</h5>\n\t\t\t<div className=\"list-group list-group-flush\">\n\t\t\t{group.lights.map(lightId => {\n\t\t\t\tconst reachable = lights[lightId].state.reachable;\n\t\t\t\t\tconst cssClass = [\n\t\t\t\t\t[\"list-group-item list-group-item-action d-flex justify-content-between align-items-center\", true],\n\t\t\t\t\t[\"active\", parseInt(currentLight) === parseInt(lightId)],\n\t\t\t\t\t[\"disabled\", !reachable]\n\t\t\t\t].map(arr => arr[1] ? arr[0] : []).join(\" \");\n\n\t\t\t\treturn <div className={cssClass}\n\t\t\t\t     onClick={() => reachable ? onChange(lightId) : {}}\n\t\t\t\t     key={lightId}\n\t\t\t\t     title={!reachable ? \"Unreachable\" : \"\"}>\n\t\t\t\t\t{lights[lightId].name}\n\t\t\t\t\t<input type=\"checkbox\"\n\t\t\t\t\t       disabled={!reachable}\n\t\t\t\t\t       checked={lights[lightId].state.on && reachable}\n\t\t\t\t\t       onChange={() => setLightState(lightId, {on: !lights[lightId].state.on})}/>\n\t\t\t\t</div>\n\t\t\t}\n\t\t\t)}\n\t\t\t</div>\n\t\t</li>\n\t)}\n</ul>;\n\nLightSelector.propTypes = {\n\tcurrentLight: propTypes.light.id,\n\tgroups: PropTypes.arrayOf(propTypes.group),\n\tlights: PropTypes.objectOf(PropTypes.shape(propTypes.light)),\n\tonChange: PropTypes.func\n};\n\nconst mapStateToProps = ({groups, lights}) => ({groups, lights});\n\nconst mapDispatchToProps = (dispatch, ownProps) => bindActionCreators({\n\tsetLightState: (lightId, state) => setLightStateThunk(lightId, state)\n}, dispatch);\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LightSelector);","import React from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\nimport {fetchGroupsThunk, fetchLightsThunk, login, logout} from \"../redux/actions\";\r\nimport ListItem from \"./ListItem\";\r\nimport LightSelector from \"./LightSelector\";\r\n\r\nclass List extends React.Component {\r\n\r\n\tstatic propTypes = {\r\n\t\tdispatch: PropTypes.func\r\n\t};\r\n\r\n\tstate = {\r\n\t\tcurrentLight: ''\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\tif (this.props.username) {\r\n\t\t\tthis.props.dispatch(login(this.props.currentBridge, this.props.username));\r\n\t\t\tthis.props.dispatch(fetchLightsThunk()).then(() => this.props.dispatch(fetchGroupsThunk()));\r\n\t\t} else {\r\n\t\t\tthis.props.dispatch(logout());\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn <div className=\"row\">\r\n\t\t\t\t<div className=\"col-3\">\r\n\t\t\t\t\t<LightSelector currentLight={this.state.currentLight} onChange={light => {\r\n\t\t\t\t\t\tthis.setState({currentLight: light})\r\n\t\t\t\t\t}}/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"col\">\r\n\t\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t{this.props.lights[this.state.currentLight] ?\r\n\t\t\t\t\t<ListItem light={this.props.lights[this.state.currentLight]}/> : 'No light selected'}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>;\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = ({usernames, currentBridge, bridges, lights}) => ({\r\n\tlights,\r\n\tusername: usernames[currentBridge],\r\n\tcurrentBridge: bridges.find(bridge => bridge.id === currentBridge)\r\n});\r\n\r\nexport default connect(mapStateToProps)(List);","import React from 'react';\n\n\nexport const LoadingIndicator = () =>\n\t[\n\t\t<i key={1} className=\"fa fa-circle-o-notch fa-spin fa-fw text-info m-2\"/>,\n\t\t<span key={2} className=\"sr-only\">Loading...</span>\n\t];","import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport {fetchBridgesThunk, loginOrRegisterThunk} from \"../redux/actions\";\n\nclass Setup extends Component {\n\n\tcomponentDidMount() {\n\t\tthis.props.dispatch(fetchBridgesThunk());\n\t}\n\n\tbridgesList() {\n\t\treturn <div className=\"container\">\n\t\t\t<h1 className=\"lead\">Select bridge:</h1>\n\t\t\t<div className=\"list-group\">\n\t\t\t{this.props.bridges.map(bridge =>\n\t\t\t\t<button className=\"list-group-item list-group-item-action\"\n\t\t\t\t   key={bridge.id}\n\t\t\t\t   onClick={() => this.props.dispatch(loginOrRegisterThunk(bridge))}>\n\t\t\t\t\t{bridge.ipaddress}\n\t\t\t\t</button>\n\t\t\t)}\n\t\t</div></div>;\n\t}\n\n\tnoBridges() {\n\t\treturn this.props.loading ? <p>Loading...</p> : <strong>No bridges found</strong>;\n\t}\n\n\trender() {\n\t\treturn this.props.bridges.length > 0 ? this.bridgesList() : this.noBridges();\n\t}\n}\n\nconst mapStateToProps = ({bridges, loading}) => ({\n\tbridges,\n\tloading\n});\n\nexport default connect(mapStateToProps)(Setup);","import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport propTypes from \"../../propTypes\";\nimport List from \"../List\";\nimport \"font-awesome/css/font-awesome.css\";\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport {LoadingIndicator} from \"../LoadingIndicator\";\nimport Setup from '../Setup';\n\nclass App extends Component {\n\tstatic propTypes = {\n\t\terror: PropTypes.object,\n\t\tloading: PropTypes.bool,\n\t\tdispatch: PropTypes.func,\n\t\tcurrentBridge: propTypes.bridge\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t[\n\t\t\t\t<nav key={0} className=\"navbar navbar-light bg-light mb-3\">\n\t\t\t\t\t<div className=\"container\">\n\t\t\t\t\t\t<a className=\"navbar-brand\" href=\"/\">Hue Web</a>\n\t\t\t\t\t</div>\n\t\t\t\t</nav>,\n\t\t\t\t<div key={1}>\n\t\t\t\t\t{this.props.loading && <div className=\"fixed-top text-right\"><LoadingIndicator/></div>}\n\t\t\t\t\t{this.props.currentBridge ? <List/> : <Setup/>}\n\t\t\t\t</div>\n\t\t\t]\n\t\t);\n\t}\n}\n\nconst mapStateToProps = ({currentBridge, bridges, loading}) => ({\n\tloading,\n\tcurrentBridge: bridges.find(bridge => bridge.id === currentBridge)\n});\n\nexport default connect(mapStateToProps)(App);\n","import React, {Component} from \"react\";\n\nclass ErrorBoundary extends Component {\n\tstate = {\n\t\thasError: false\n\t};\n\n\tcomponentDidCatch(error, info) {\n\t\tthis.setState({hasError: true});\n\t}\n\n\trender() {\n\t\tif (this.state.hasError) {\n\t\t\treturn <div className=\"alert alert-danger mt-4\" role=\"alert\">\n\t\t\t\t<button type=\"button\" className=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"\n\t\t\t\t        onClick={() => this.setState({hasError: false})}>\n\t\t\t\t\t<span aria-hidden=\"true\">&times;</span>\n\t\t\t\t</button>\n\t\t\t\t<strong>Oh snap!</strong> Something went wrong\n\t\t\t</div>;\n\t\t}\n\t\treturn this.props.children;\n\t}\n}\n\nexport default ErrorBoundary;","import {types} from './actions';\r\nimport {HueApi} from 'node-hue-api';\r\n\r\nexport const api = (state = new HueApi(), action) => {\r\n\tswitch (action.type) {\r\n\t\tcase types.LOGIN:\r\n\t\t\tconst {bridge, username} = action.payload;\r\n\t\t\treturn new HueApi(bridge.ipaddress, username);\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n\r\nexport const loading = (state = false, action) => {\r\n\treturn !action.type.includes(\"_SUCCESS\");\r\n};\r\n\r\nexport const currentBridge = (state = null, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase types.LOGIN:\r\n\t\t\treturn action.payload.bridge.id;\r\n\t\tcase types.LOGOUT:\r\n\t\t\treturn null;\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n\r\nexport const groups = (state = [], action) => {\r\n\tswitch (action.type) {\r\n\t\tcase types.FETCH_GROUPS_SUCCESS:\r\n\t\t\treturn action.payload;\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n\r\nexport const bridges = (state = [], action) => {\r\n\tswitch (action.type) {\r\n\t\tcase types.FETCH_BRIDGES_SUCCESS:\r\n\t\t\treturn action.payload;\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n\r\nexport const usernames = (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase types.REGISTER:\r\n\t\t\treturn {...state, [action.payload.bridgeId]: action.payload.username};\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n\r\nexport const lights = (state = {}, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase types.FETCH_LIGHTS_SUCCESS:\r\n\t\t\treturn action.payload;\r\n\t\tcase types.SET_LIGHT_STATE:\r\n\t\t\tconst {payload} = action;\r\n\t\t\treturn {...state, ...{[payload.id]: {...state[payload.id], ...{state: {...state[payload.id].state, ...payload.state}}}}};\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {Provider} from \"react-redux\";\nimport {applyMiddleware, combineReducers, compose, createStore} from \"redux\";\nimport {createLogger} from \"redux-logger\";\nimport thunk from \"redux-thunk\";\nimport App from \"./components/App/App\";\nimport ErrorBoundary from \"./components/ErrorBoundary\";\nimport * as reducers from \"./redux/reducers\";\nimport * as serviceWorker from './serviceWorker';\n\nconst LOCAL_STORAGE_STATE_KEY = 'reduxState';\n\nconst store = createStore(\n\tcombineReducers(reducers),\n\tlocalStorage.getItem(LOCAL_STORAGE_STATE_KEY) ? JSON.parse(localStorage.getItem(LOCAL_STORAGE_STATE_KEY)) : {},\n\tcompose(\n\t\tprocess.env.NODE_ENV === 'development'\n\t\t\t? applyMiddleware(thunk, createLogger({collapsed: true}))\n\t\t\t: applyMiddleware(thunk),\n\t)\n);\n\nstore.subscribe(() => {\n\tconst persistedState = (({usernames, currentBridge}) => ({usernames, currentBridge}))(store.getState());\n\tlocalStorage.setItem(LOCAL_STORAGE_STATE_KEY, JSON.stringify(persistedState));\n});\n\nReactDOM.render(\n\t<Provider {...{store}}>\n\t\t<ErrorBoundary>\n\t\t\t<App/>\n\t\t</ErrorBoundary>\n\t</Provider>,\n\tdocument.getElementById('root')\n);\n\nserviceWorker.register();"],"sourceRoot":""}